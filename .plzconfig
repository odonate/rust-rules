[Please]
version = 17.8.7

[Build]
path = /opt/rust-rules/toolchain/1.0/bin/:/bin:/usr/bin:/usr/local/bin
timeout = 2000

[Plugin "rust"]
RustcTool = //third_party/rust:toolchain_rustc
StdLib = //third_party/rust:toolchain_stdlib
TargetDir = //third_party/rust:toolchain_target

[Parse]
preloadsubincludes = ///shell//build_defs:shell
preloadbuilddefs = toolchain/versions.build_defs
preloadbuilddefs = build_defs/rust_toolchain.build_defs
preloadbuilddefs = build_defs/rust.build_defs
preloadbuilddefs = build_defs/rust_crate.build_defs

[Plugin "shell"]
Target = //plugins:shell

[PluginDefinition]
name = rust

[PluginConfig "rustc"]
DefaultValue = //third_party/rust:toolchain_rustc
Help = A file path or build label for rustc.
Inherit = true

[PluginConfig "stdlib"]
DefaultValue = //third_party/rust:toolchain_stdlib
Help = A file path or build label for a rust stdlib.
Inherit = true
Optional = true

[PluginConfig "repo_root"]
DefaultValue = //third_party/rust:toolchain_target
Help = An absolute filepath of the repo root. Used for linking external dependencies.
Inherit = true
Optional = true

[alias "rustc"]
cmd = run //scripts:rustc
subcommand = ["--version", "-vV", "--explain"]

[alias "cargo"]
cmd = run //scripts:cargo
subcommand = ["build", "test", "run", "clean", "check", "new"]
flag = ["--release", "--verbose", "--manifest-path"]
PositionalLabels = true